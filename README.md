# autoapi

YAPI接口自动化，生成ts文件，即用即取

## install
``` 
npm i yapi-autoapi -g
```

## 初始化
```
autoapi init 
```
创建 autoapi.config.js 配置文件

``` js
// ati.config.js
module.exports = {
  // yapi 项目 url
  url: '',
  // 项目 id
  projectId: '',
  // yapi 项目 token
  token: '',
  // interface 输出目录
  output: '',
  // 项目内的分组 id
  groupId: [],
  // (可选) 自定义 interface name 
  customInterfaceName: (name, type) => {
    if (type === 'req') {
      return `${name}Req`
    } else {
      return `${name}Res`
    }
  }
}
```

```
## run： 自动生成request文件
```
autoapi run
```

## configs
| 属性                | 说明                 | 类型                | 默认值 |
| ------------------- | -------------------- | ------------------- | ------ |
| url                 | yapi 项目 url        | string              |        |
| projectId           | 项目 id              | string              |        |
| token               | yapi 项目 token      | string              |        |
| output              | interface 输出目录   | string              |        |
| groupId             | 项目内的分组 id      | string[]            |        |
| customInterfaceName | 自定义interface name | CustomInterfaceName |        |
```
### 生成结果

``` js
import request from './lib/'
/* tslint:disable */
/* This file was automatically generated by auto-request-tool.
 * DO NOT MODIFY IT BY HAND.
 */
export interface UserInfoReq {
  /**
   * 用户id
   */
  userId: string
  /**
   * 用户姓名
   */
  userName?: string
  /**
   * 手机号
   */
  mobile?: string
  /**
   * 是否男性
   */
  male?: boolean
}

export interface UserInfoRes {
  /**
   * id
   */
  id: number
  /**
   * 用户id
   */
  userId: string
  /**
   * 用户姓名
   */
  userName?: string
  /**
   * 手机号
   */
  mobile?: string
  /**
   * 是否男性
   */
  male?: boolean
  /**
   * 头像
   */
  avatar?: string
}

export async function confirmAudit(data: UserInfoReq): Promise<UserInfoRes> {
  return request('/autoapi/request/getUserInfo', {
    method: 'post',
    data
  })
}
```